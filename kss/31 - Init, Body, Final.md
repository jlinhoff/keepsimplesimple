---


---

<p>Guarantee perfect resource management.</p>
<p>Your code must be structured with an init, body, and final such that the init is guaranteed to run first and the final is guaranteed to run last. The body code is all the code that runs between the init and final.</p>
<p>In C++, wrap your resources in an object and use RAII. In C, use scope and final section of code.</p>
<h2 id="init">Init</h2>
<p>Clear references.</p>
<h2 id="body">Body</h2>
<p>Alloc and free using the references.</p>
<h2 id="final">Final</h2>
<p>Free references.</p>
<h2 id="use-goto-final">Use: goto FINAL;</h2>
<p>Must have a single return from functions. Clean up in the final block.</p>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-W6vDFaZKzArquIxk" width="100%" style="max-width: 268.90625px;" viewBox="0 0 268.90625 107.515625"><g transform="translate(-12, -12)"><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M62.875,65.28548746635262L87.875,48.2578125L112.875,48.2578125" marker-end="url(#arrowhead557)" style="fill:none"></path><defs><marker id="arrowhead557" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M169.390625,48.2578125L194.390625,48.2578125L219.390625,63.53517099056604" marker-end="url(#arrowhead558)" style="fill:none"></path><defs><marker id="arrowhead558" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M62.875,94.48795003364738L87.875,111.515625L141.1328125,111.515625L194.390625,111.515625L219.390625,96.23826650943397" marker-end="url(#arrowhead559)" style="fill:none"></path><defs><marker id="arrowhead559" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="" style="opacity: 1;"><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node" id="A" transform="translate(41.4375,79.88671875)" style="opacity: 1;"><rect rx="0" ry="0" x="-21.4375" y="-23" width="42.875" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-11.4375,-13)"><foreignObject width="22.875" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Init</div></foreignObject></g></g></g><g class="node" id="B" transform="translate(141.1328125,48.2578125)" style="opacity: 1;"><circle x="-28.2578125" y="-23" r="28.2578125"></circle><g class="label" transform="translate(0,0)"><g transform="translate(-18.2578125,-13)"><foreignObject width="36.515625" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Body</div></foreignObject></g></g></g><g class="node" id="C" transform="translate(246.1484375,79.88671875)" style="opacity: 1;"><rect rx="0" ry="0" x="-26.7578125" y="-23" width="53.515625" height="46"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-16.7578125,-13)"><foreignObject width="33.515625" height="26"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; white-space: nowrap;">Final</div></foreignObject></g></g></g></g></g></g></svg></div>

